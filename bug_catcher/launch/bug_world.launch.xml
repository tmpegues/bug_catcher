<launch>
    <arg name="demo" default="True" description="bool: true will launch the Franka demo.launch.py. False will open rviz, but not the demo"/>

    <!--Launch the Franka Rviz Configuration-->
    <include file="$(find-pkg-share franka_fer_moveit_config)/launch/demo.launch.py" if="$(eval $(var demo)==True)"/>
    <include file="$(find-pkg-share franka_fer_moveit_config)/launch/moveit_rviz.launch.py" if="$(eval $(var demo)==False)">
        <arg  name ="robot_ip" value="panda0.robot"/>
    </include>

    <!--Launch the Realsense Camera Node-->
    <include file="$(find-pkg-share realsense2_camera)/launch/rs_launch.py">
        <!-- Depth stream: 1280x720 at 15 Hz -->
        <arg name="depth_module.profile" value="1280x720x15"/>
        <!-- Color stream: 1280x720 at 15 Hz -->
        <arg name="color_module.profile" value="1280x720x15"/>
        <arg name="pointcloud.enable" value="true"/>
    </include>

    <!--Launch the April tag identification Node-->
    <node pkg="apriltag_ros" exec="apriltag_node" name="apriltag">
        <!-- Remaps to RealSense topics -->
        <remap from="image_rect" to="/camera/camera/color/image_raw"/>
        <remap from="camera_info" to="/camera/camera/color/camera_info"/>
        <param from = "$(find-pkg-share apriltag_ros)/cfg/tags_16h5.yaml"/>
    </node>

   <!--Load the Calibration Node and await action service call-->
    <node pkg="bug_catcher" exec="calibration_node">
        <!-- Load AprilTag tag family -->
        <param name="filename" value="$(find-pkg-share bug_catcher)/config/calibration_parameters.yaml"/>
    </node>

    <!--Load the planning scene and await action service call-->
    <node pkg="bug_catcher" exec="pick_node">
        <!-- Load AprilTag tag family -->
        <param name="filename" value="$(find-pkg-share bug_catcher)/config/objects.yaml"/>
    </node>
</launch>